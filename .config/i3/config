# Please see http://i3wm.org/docs/userguide.html for a complete reference!
#focus_follows_mouse no

set $mod Mod4

#font pango:DejaVu Sans Mono 8

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# kill focused window
bindsym $mod+Shift+q kill

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left 50px
bindsym $mod+Shift+j move down 50px
bindsym $mod+Shift+k move up 50px
bindsym $mod+Shift+l move right 50px


# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
#bindsym $mod+s layout stacking
#bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10
bindsym $mod+bar workspace work

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart


# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)

bar {
  i3bar_command i3bar -t
  status_command i3blocks


  font pango:DejaVu Sans Mono, Icons, FontAwesome 14
  font pango:xos4 Terminus Semi-Condensed Bold 13
  #font pango: digital-7 14
  #font pango:Fantasque sans mono bold italic 14


  tray_output none

  height 20

  colors {
  statusline "#FFFFFFFF"
  #statusline "#0099AAFF"
  #background "#15151590"
  background "#1A1A1A"
  separator "#AAAAAAFF"

  #focused_workspace   #00000000 #558888FF #FFFFFF 
  #inactive_workspace  #00000000 #152222FF #88D2D2
  focused_workspace   #00000000 #99BBBB #000000 
  inactive_workspace  #00000000 #222222FF #BBFFDD
  urgent_workspace    #000000FF #FFFFFF99 #000000
  }
}


#myconf

#bar mod
bindsym $mod+Shift+p bar mode toggle

#font
#font "pango:InconsolataForPowerline NF small 8"
font pango:xos4 Terminus Semi-Condensed 8

#session
mode "session" {
  #bindsym e exec --no-startup-id systemctl --user stop i3-gaps.target; i3-msg exit ; mode "default"
  #bindsym e exec --no-startup-id systemctl --user stop i3-gaps.target; exec i3-msg exit ; mode "default"
  bindsym l exec --no-startup-id ~/Scripts/i3/i3lock-blur; mode "default"
  bindsym s exec --no-startup-id "systemctl --user stop i3-gaps.target; sleep 0.5; systemctl poweroff"; mode "default"
  bindsym r exec --no-startup-id "systemctl --user stop i3-gaps.target; sleep 0.5; systemctl reboot"; mode "default"

  bindsym q mode "default"
  bindsym Escape mode "default"
  bindsym Return mode "default"
}
bindsym $mod+Shift+e mode "session"

#gaps
set $outer 0
set $inner 23

#smart_gaps off
gaps outer $outer
gaps inner $inner

set $cust1 customization 1
set $cust2 customization 2
set $cust3 customization 3

bindsym $mod+n mode "$cust1"
mode "$cust1" {
  bindsym 1 mode "$cust1"
  bindsym 2 mode "$cust2"
  bindsym 3 mode "$cust3"

  bindsym h resize grow width 5 px or 1 ppt
  bindsym j resize grow height 5 px or 1 ppt
  bindsym k resize shrink height 5 px or 1 ppt
  bindsym l resize shrink width 5 px or 1 ppt

  bindsym $mod+Shift+h move left 10px
  bindsym $mod+Shift+j move down 10px
  bindsym $mod+Shift+k move up 10px
  bindsym $mod+Shift+l move right 10px

  bindsym Escape mode "default"
  bindsym q mode "default"
}
mode "$cust2" {
  bindsym 1 mode "$cust1"
  bindsym 2 mode "$cust2"
  bindsym 3 mode "$cust3"

  bindsym h resize grow width 15 px or 4 ppt
  bindsym j resize grow height 15 px or 4 ppt
  bindsym k resize shrink height 15 px or 4 ppt
  bindsym l resize shrink width 15 px or 4 ppt

  bindsym $mod+Shift+h move left 25px
  bindsym $mod+Shift+j move down 25px
  bindsym $mod+Shift+k move up 25px
  bindsym $mod+Shift+l move right 25px

  bindsym Escape mode "default"
  bindsym q mode "default"
}
mode "$cust3" {
  bindsym 1 mode "$cust1"
  bindsym 2 mode "$cust2"
  bindsym 3 mode "$cust3"

  bindsym h resize grow width 60 px or 20 ppt
  bindsym j resize grow height 60 px or 20 ppt
  bindsym k resize shrink height 60 px or 20 ppt
  bindsym l resize shrink width 60 px or 20 ppt

  bindsym $mod+Shift+h move left 60px
  bindsym $mod+Shift+j move down 60px
  bindsym $mod+Shift+k move up 60px
  bindsym $mod+Shift+l move right 60px

  bindsym Escape mode "default"
  bindsym q mode "default"
}

bindsym $mod+Shift+n mode "gaps"
mode "gaps" {
  bindsym 1 gaps inner current set $inner
  bindsym 0 gaps inner current set 5

  bindsym Escape mode "default"
  bindsym q mode "default"
}

#border
#new_window pixel 0
smart_borders on
for_window [class="^.*"] border pixel 0
bindsym $mod+b border toggle

#translate
bindsym $mod+a exec --no-startup-id Scripts/i3/translate_ya_ru
bindsym $mod+q exec --no-startup-id Scripts/i3/translate_trans


#launcher
mode "launcher" {
  bindsym F1 exec --no-startup-id telegram-desktop -- %u; mode "default"

  # bindsym $mod+d exec dmenu_run; mode "default"
  bindsym d exec --no-startup-id j4-dmenu-desktop --no-generic  --dmenu='dmenu -i -l 20 -dim 1 -fn 8';mode "default"

  #terminal
  bindsym Return exec --no-startup-id i3-sensible-terminal; mode "default"

  #chromium
  bindsym c exec --no-startup-id chromium; mode "default"
  bindsym $mod+c exec --no-startup-id pkill chromium; mode "default"

  #firefox
  bindsym f exec firefox; mode "default"
  bindsym $mod+f exec --no-startup-id pkill firefox; mode "default"

  #pulse audio
  bindsym p exec pavucontrol; mode "default"

  #weather
  bindsym t exec --no-startup-id Scripts/i3/weather; mode "default"

  # split in horizontal orientation
  bindsym $mod+h split h
  # split in vertical orientation
  bindsym $mod+v split v
  # focus the parent container
  bindsym $mod+o focus parent
  # focus the child container
  bindsym $mod+c focus child

  #bindsym q mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+x mode "launcher"

#start i3
exec_always --no-startup-id systemctl --user start i3-gaps.target

#unit manager
mode "unit manager"{
  bindsym w exec --no-startup-id systemctl --user start feh-wallpaper.service; mode "default"
  bindsym $mod+w exec --no-startup-id systemctl --user stop feh-wallpaper.timer; mode "default"

  bindsym c exec --no-startup-id systemctl --user restart compton.service; mode "default"
  bindsym $mod+c exec --no-startup-id systemctl --user stop compton.service; mode "default"

  bindsym d exec --no-startup-id systemctl --user restart ddterminal.service; mode "default"
  bindsym $mod+d exec --no-startup-id systemctl --user stop ddterminal.service; mode "default"

  bindsym i exec --no-startup-id systemctl --user restart i3-gaps.target; mode "default"
  bindsym $mod+i exec --no-startup-id systemctl --user stop i3-gaps.target; mode "default"

  bindsym F1 exec --no-startup-id systemctl --user restart telegram.service; mode "default"
  bindsym $mod+F1 exec --no-startup-id systemctl --user stop telegram.service; mode "default"

  bindsym l exec --no-startup-id systemctl --user restart lofi-radio.service; mode "default"
  bindsym $mod+l exec --no-startup-id systemctl --user stop lofi-radio.service; mode "default"

  bindsym m exec --no-startup-id systemctl --user restart ncmpcpp.service; mode "default"
  bindsym $mod+m exec --no-startup-id systemctl --user stop ncmpcpp.service; mode "default"

  bindsym r exec --no-startup-id systemctl --user restart ranger.service; mode "default"
  bindsym $mod+r exec --no-startup-id systemctl --user stop ranger.service; mode "default"

  bindsym t exec --no-startup-id systemctl --user restart rtorrent.service; mode "default"
  bindsym $mod+t exec --no-startup-id systemctl --user stop rtorrent.service; mode "default"

  bindsym F2 exec --no-startup-id systemctl --user restart toxic.service; mode "default"
  bindsym $mod+F2 exec --no-startup-id systemctl --user stop toxic.service; mode "default"

  bindsym 1 exec --no-startup-id systemctl --user restart mcabber.service; mode "default"
  bindsym mod3+1 exec --no-startup-id systemctl --user stop mcabber.service; mode "default"

  bindsym period exec --no-startup-id systemctl --user restart qt-log.service; mode "default"
  bindsym $mod+period exec --no-startup-id systemctl --user stop qt-log.service; mode "default"

  bindsym q mode "default"
  bindsym Escape mode "default"
  bindsym Return mode "default"
}
bindsym $mod+u mode "unit manager"

#scratchpad
bindsym $mod+minus move scratchpad
bindsym $mod+plus scratchpad show

#telegram messenger
bindsym $mod+F1 [class="TelegramDesktop"] scratchpad show
for_window [class="TelegramDesktop"] floating enable
for_window [class="TelegramDesktop"] resize set 525 700
for_window [class="TelegramDesktop"] move position 1375 10
for_window [class="TelegramDesktop"] sticky enable
for_window [class="TelegramDesktop"] move scratchpad

#ncmpcpp
bindsym $mod+m [class="ncmpcpp-desktop"] scratchpad show
for_window [class="ncmpcpp-desktop"] floating enable
for_window [class="ncmpcpp-desktop"] sticky enable
for_window [class="ncmpcpp-desktop"] move position 210 745
for_window [class="ncmpcpp-desktop"] resize set 1500 300
for_window [class="ncmpcpp-desktop"] move scratchpad

#drop down terminal
bindsym $mod+d [class="ddterminal-desktop"] scratchpad show
for_window [class="ddterminal-desktop"] floating enable
for_window [class="ddterminal-desktop"] sticky enable
for_window [class="ddterminal-desktop"] move position 5 5
for_window [class="ddterminal-desktop"] resize set 1910 486
#for_window [class="ddterminal-desktop"] move position 5 5
#for_window [class="ddterminal-desktop"] resize set 1300 980
for_window [class="ddterminal-desktop"] move scratchpad

#toxic messenger
bindsym $mod+F2 [class="toxic-desktop"] scratchpad show
for_window [class="toxic-desktop"] floating enable
for_window [class="toxic-desktop"] sticky enable
for_window [class="toxic-desktop"] move position 20 10
for_window [class="toxic-desktop"] resize set 700 850
for_window [class="toxic-desktop"] move scratchpad

#mcabber messenger
bind Mod5+10 [class="mcabber-desktop"] scratchpad show
for_window [class="mcabber-desktop"] floating enable
for_window [class="mcabber-desktop"] sticky enable
for_window [class="mcabber-desktop"] move position 20 10
for_window [class="mcabber-desktop"] resize set 700 850
for_window [class="mcabber-desktop"] move scratchpad

#ranger file manager
bindsym $mod+r [class="ranger-desktop"] scratchpad show
for_window [class="ranger-desktop"] floating enable
for_window [class="ranger-desktop"] sticky enable
for_window [class="ranger-desktop"] move position 5 5
for_window [class="ranger-desktop"] resize set 1910 490
for_window [class="ranger-desktop"] move scratchpad

#rtorrent
bindsym $mod+t [class="rtorrent-desktop"] scratchpad show
for_window [class="rtorrent-desktop"] floating enable
for_window [class="rtorrent-desktop"] sticky enable
for_window [class="rtorrent-desktop"] move position 192 108
for_window [class="rtorrent-desktop"] resize set 1536 864
for_window [class="rtorrent-desktop"] move scratchpad

#gis weather
bindsym $mod+w [class="Gis-weather.py"] scratchpad show
for_window [class="Gis-weather.py"] floating enable
for_window [class="Gis-weather.py"] sticky enable
for_window [class="Gis-weather.py"] move position 10 10
for_window [class="Gis-weather.py"] move scratchpad

#qt debug console
for_window [class="cool-retro-term"] floating enable
for_window [class="cool-retro-term"] move position 1050 70
for_window [class="cool-retro-term"] resize set 720 400


#floating mpv
for_window [class="mpv"] floating enable
for_window [class="mpv"] resize set 400 225
for_window [class="mpv"] move position 727 30 

#lo-fi radio
bindsym $mod+p [instance="lofi-radio"] scratchpad show
for_window [instance="lofi-radio"] floating enable
for_window [instance="lofi-radio"] sticky enable
for_window [instance="lofi-radio"] resize set 640 360
for_window [instance="lofi-radio"] move position 1255 675 
for_window [instance="lofi-radio"] move scratchpad

#qt project log
bindsym $mod+period [class="qt-log"] scratchpad show
for_window [class="qt-log"] floating enable
for_window [class="qt-log"] sticky enable
for_window [class="qt-log"] move position 500 700
for_window [class="qt-log"] resize set 1200 300
for_window [class="qt-log"] move scratchpad

#qt projects
#for_window [class="qtTest"] floating enable

#screenshot
bindsym --release Print exec --no-startup-id ~/Scripts/i3/screenshot_full
bindsym --release $mod+Print exec --no-startup-id ~/Scripts/i3/screenshot_focus
bindsym --release $mod+Shift+Print exec --no-startup-id ~/Scripts/i3/screenshot_area Screens
mode "screen layer" {
  bindsym --release o exec --no-startup-id ~/Scripts/i3/screenshot_area study_obj ; mode "default"
  bindsym --release t exec --no-startup-id ~/Scripts/i3/screenshot_area terms ; mode "default"

  bindsym q mode "default"
  bindsym Escape mode "default"
  bindsym Return mode "default"
}
bindsym $mod+s mode "screen layer"

#language
bindsym ISO_Next_Group exec --no-startup-id pkill -RTMIN+1 i3blocks

#volume
bind Mod5+44 exec --no-startup-id pactl -- set-sink-volume 0 +5%; exec --no-startup-id pkill -RTMIN+10 i3blocks
bind Mod5+45 exec --no-startup-id pactl set-sink-mute 0 toggle; exec --no-startup-id pkill -RTMIN+10 i3blocks
bind Mod5+58 exec --no-startup-id pactl -- set-sink-volume 0 100%; exec --no-startup-id pkill -RTMIN+10 i3blocks
bind Mod5+46 exec --no-startup-id pactl -- set-sink-volume 0 -5%; exec --no-startup-id pkill -RTMIN+10 i3blocks

#other
bindsym $mod+v exec --no-startup-id xdotool key z
